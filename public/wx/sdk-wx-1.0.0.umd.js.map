{"version":3,"file":"sdk-wx-1.0.0.umd.js","sources":["../../src/utils/date.ts","../../src/utils/common.ts","../../src/constants/globalData.ts","../../src/sdk/wx/wxUtils.ts","../../src/types/enum.ts","../../src/sdk/wx/wxAdManger.ts","../../src/sdk/wx/index.ts","../../test/wxTest.ts"],"sourcesContent":["/**\r\n * 获取当前时间戳\r\n */\r\nexport function getCurrentTimeStamp() {\r\n    return new Date().getTime()\r\n}\r\n\r\n/**\r\n * 获取格式时间\r\n * @param timestamp\r\n * @param format\r\n */\r\nexport function getFormatDate(\r\n    timestamp?: number,\r\n    format?: 'YYYY-MM-DD hh:mm:ss' | 'YYYY-MM-DD'\r\n) {\r\n    const date = timestamp ? new Date(timestamp) : new Date()\r\n    const years = date.getFullYear()\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    const formatNum = (num: string | number) => {\r\n        return String(num).padStart(2, '0')\r\n    }\r\n    let dateStr = `${years}-${formatNum(month)}-${formatNum(day)}`\r\n\r\n    if (format === 'YYYY-MM-DD hh:mm:ss') {\r\n        const hour = date.getHours()\r\n        const min = date.getMinutes()\r\n        const second = date.getSeconds()\r\n        dateStr += ` ${formatNum(hour)}:${formatNum(min)}:${formatNum(second)}`\r\n    }\r\n\r\n    return dateStr\r\n}\r\n\r\n/** 获取当前时间戳 */\r\nexport function getCurrentTimestamp() {\r\n    return new Date().getTime()\r\n}\r\n","import { AnyObject } from '../types'\r\nimport { getFormatDate } from './date'\r\n\r\n/**\r\n * 将对象转成参数\r\n * @param obj 对象\r\n * @param isEncode 是否encode\r\n * @returns a=1&b=2...\r\n */\r\nexport function qsString(obj: any, isEncode: boolean = true) {\r\n    if (obj instanceof Object) {\r\n        let str = ''\r\n        Object.keys(obj).forEach((key, index) => {\r\n            str += `${index ? '&' : ''}${key}=${\r\n                isEncode ? encodeURIComponent(obj[key]) : obj[key]\r\n            }`\r\n        })\r\n        return str\r\n    } else if (typeof obj === 'string') {\r\n        return obj\r\n    } else if (typeof obj === 'number') {\r\n        return `${obj}`\r\n    } else {\r\n        return ''\r\n    }\r\n}\r\n\r\n/**\r\n * 校验是否为纯粹的对象\r\n * @param obj\r\n */\r\nexport function isPlainObject(obj) {\r\n    let proto, Ctor\r\n    if (!obj || typeof obj !== 'object') return false\r\n    proto = Object.getPrototypeOf(obj)\r\n    if (!proto) return true\r\n    Ctor = proto.hasOwnProperty('constructor') && proto.constructor\r\n    return typeof Ctor === 'function' && Ctor === Object\r\n}\r\n/**\r\n * 是否为空对象\r\n * @param obj\r\n */\r\nexport function isEmptyObj(obj) {\r\n    return Object.keys(obj).length <= 0\r\n}\r\n\r\n/**\r\n * 格式化post请求的body\r\n * @param body\r\n * @param contentType\r\n */\r\nexport function formatPostBody(body?: AnyObject, contentType?: string) {\r\n    if (!body) {\r\n        return ''\r\n    }\r\n    if (!contentType || contentType.includes('urlencoded'))\r\n        return qsString(body)\r\n    if (contentType.includes('json'))\r\n        return typeof body === 'string' ? body : JSON.stringify(body)\r\n}\r\n\r\nexport function deepCloneObj<T>(obj: AnyObject) {\r\n    return JSON.parse(JSON.stringify(obj)) as T\r\n}\r\n\r\n/**是否为无效值 */\r\nexport function isInvalidVal(val: any) {\r\n    return (\r\n        ['', NaN, undefined, null, 'null', 'undefined', 'NaN'].indexOf(val) >= 0\r\n    )\r\n}\r\n\r\n/** sdkLog日志 */\r\nexport function sdkLog(...args) {\r\n    console.log(\r\n        `sdkLog: ${getFormatDate(null, 'YYYY-MM-DD hh:mm:ss')} ========> `,\r\n        ...args\r\n    )\r\n}\r\n\r\n/** sdkLog日志: warn */\r\nexport function sdkWarnLog(...args) {\r\n    console.warn(\r\n        `sdkLog: ${getFormatDate(null, 'YYYY-MM-DD hh:mm:ss')} ========> `,\r\n        ...args\r\n    )\r\n}\r\n\r\n/** sdkLog日志: err */\r\nexport function sdkErrorLog(...args) {\r\n    console.error(\r\n        `sdkLog: ${getFormatDate(null, 'YYYY-MM-DD hh:mm:ss')} ========> `,\r\n        ...args\r\n    )\r\n}\r\n","import { AnyObject } from '@/types'\r\nimport { deepCloneObj, isInvalidVal, sdkLog } from '@/utils/common'\r\n\r\ninterface GlobalDataType extends AnyObject {\r\n    /** 版本号 */\r\n    version: string\r\n    /** 初始化信息 */\r\n    initInfo: AnyObject\r\n    /** 系统设备信息 */\r\n    systemInfo: AnyObject\r\n    /** 用户信息 */\r\n    userInfo: AnyObject\r\n    /** 场景或加载信息 */\r\n    launchInfo: AnyObject\r\n}\r\n\r\nconst data: GlobalDataType = {\r\n    version: '1.0.0',\r\n    initInfo: {},\r\n    systemInfo: {},\r\n    userInfo: {},\r\n    launchInfo: {},\r\n}\r\n\r\nconst dataProxy = new Proxy(data, {\r\n    get: (target: GlobalDataType, key: string) => {\r\n        return target[key]\r\n    },\r\n    set: (target: GlobalDataType, key: string, val) => {\r\n        if (typeof target[key] !== 'object' || isInvalidVal(val)) {\r\n            target[key] = val\r\n        } else {\r\n            Object.assign(target[key], val)\r\n        }\r\n\r\n        sdkLog(`${key}: `, target[key])\r\n        return true\r\n    },\r\n})\r\n\r\nexport function getGlobalData(): GlobalDataType {\r\n    return dataProxy\r\n}\r\n","import { sdkWarnLog } from '@/utils/common'\r\n\r\nexport function wxCompareVersion(v1, v2) {\r\n    v1 = v1.split('.')\r\n    v2 = v2.split('.')\r\n    const len = Math.max(v1.length, v2.length)\r\n\r\n    while (v1.length < len) {\r\n        v1.push('0')\r\n    }\r\n    while (v2.length < len) {\r\n        v2.push('0')\r\n    }\r\n\r\n    for (let i = 0; i < len; i++) {\r\n        const num1 = parseInt(v1[i])\r\n        const num2 = parseInt(v2[i])\r\n\r\n        if (num1 > num2) {\r\n            return 1\r\n        } else if (num1 < num2) {\r\n            return -1\r\n        }\r\n    }\r\n\r\n    return 0\r\n}\r\n/**\r\n * 当前版本是否支持\r\n * @param version 目标版本\r\n * @returns\r\n */\r\nexport function isSupportVersion(version: string) {\r\n    if (!version) {\r\n        sdkWarnLog('请填写要校验的版本号')\r\n        return false\r\n    }\r\n\r\n    const currentVersion = wx.getAppBaseInfo\r\n        ? wx.getAppBaseInfo().SDKVersion\r\n        : wx.getAccountInfoSync().miniProgram.version\r\n    const flag = wxCompareVersion(currentVersion, version)\r\n    return flag >= 0\r\n}\r\n","export enum ResponseTypeEnum {\r\n    JSON = 'JSON',\r\n    TEXT = 'TEXT',\r\n    BLOB = 'BLOB',\r\n    ARRAYBUFFER = 'ARRAYBUFFER',\r\n}\r\n\r\nexport enum AdTypeEnum {\r\n    /** banner */\r\n    banner = 'banner',\r\n    /** 激励 */\r\n    rewardVideo = 'rewardVideo',\r\n    /** 插屏 */\r\n    interstitial = 'interstitial',\r\n}\r\n","import { AdMangerType, AnyObject } from '@/types'\r\nimport { AdTypeEnum } from '@/types/enum'\r\nimport { isSupportVersion } from './wxUtils'\r\nimport { sdkWarnLog } from '@/utils/common'\r\n/** 广告map */\r\nconst adMap: Map<AdTypeEnum, any[]> = new Map()\r\n/** 广告关闭回调map缓存 */\r\nconst adCloseCallback: Map<AdTypeEnum, Function[]> = new Map()\r\ntype adOptType =\r\n    | WechatMinigame.CreateBannerAdOption\r\n    | WechatMinigame.CreateRewardedVideoAdOption\r\n    | WechatMinigame.CreateInterstitialAdOption\r\n\r\nexport class WxAdManger implements AdMangerType {\r\n    adMap = adMap\r\n\r\n    constructor() {\r\n        // 初始化广告map\r\n        ;[\r\n            AdTypeEnum.banner,\r\n            AdTypeEnum.rewardVideo,\r\n            AdTypeEnum.interstitial,\r\n        ].forEach((type) => {\r\n            adMap.set(type, [])\r\n            adCloseCallback.set(type, [])\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @param type AdTypeEnum\r\n     * @param data\r\n     */\r\n    createAd(type: AdTypeEnum, data: adOptType) {\r\n        const support = isSupportVersion('2.0.4')\r\n        if (!support) {\r\n            sdkWarnLog('广告创建版本要求最低2.0.4')\r\n            return\r\n        }\r\n        /** 添加广告关闭回调 */\r\n        const addOnCloseFn = () => {\r\n            if (type !== AdTypeEnum.banner) {\r\n                // 清空回调缓存\r\n                const cbArr = adCloseCallback.get(type).splice(0)\r\n                cbArr.forEach((cb) => this.onAdClose(type, cb))\r\n            }\r\n        }\r\n\r\n        let ad = this.getAdInstance(type, data.adUnitId)\r\n        // 如果有广告实例，则返回\r\n        if (ad) {\r\n            addOnCloseFn()\r\n            return ad\r\n        }\r\n\r\n        // 创建广告实例\r\n        if (type === AdTypeEnum.banner) {\r\n            ad = wx.createBannerAd(data as WechatMinigame.CreateBannerAdOption)\r\n        } else if (type === AdTypeEnum.rewardVideo) {\r\n            ad = wx.createRewardedVideoAd(data)\r\n        } else if (type === AdTypeEnum.interstitial) {\r\n            ad = wx.createInterstitialAd(data)\r\n        }\r\n        // 把广告id也加进去\r\n        ad.id = data.adUnitId\r\n        adMap.get(type).push(ad)\r\n        addOnCloseFn()\r\n        return ad\r\n    }\r\n\r\n    /**\r\n     * @param type AdTypeEnum\r\n     * @param adId 广告id\r\n     */\r\n    showAd(type: AdTypeEnum, data: adOptType) {\r\n        const ad = this.createAd(type, data)\r\n        ad && ad.show()\r\n        return ad\r\n    }\r\n\r\n    /**\r\n     * 隐藏广告，不传广告id，则全部隐藏\r\n     * @param type AdTypeEnum\r\n     * @param adId 广告id\r\n     */\r\n    hide(type: AdTypeEnum, adId?: string) {\r\n        // 只有banner才能隐藏\r\n        if (type !== AdTypeEnum.banner) {\r\n            return\r\n        }\r\n        if (adId) {\r\n            const ad = this.getAdInstance(type, adId)\r\n            ad && ad.hide()\r\n        } else {\r\n            adMap.get(type).forEach((ad) => {\r\n                ad.hide()\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 销毁广告，不传广告id，则全部销毁\r\n     * @param type AdTypeEnum\r\n     * @param adId 广告id\r\n     */\r\n    destroyAd(type: AdTypeEnum, adId?: string) {\r\n        if (adId) {\r\n            const ad = this.getAdInstance(type, adId)\r\n            if (ad) {\r\n                ad.destroy()\r\n                const index = adMap\r\n                    .get(type)\r\n                    .findIndex((item) => item.id === ad.id)\r\n                if (index >= 0) {\r\n                    adMap.get(type).splice(index, 1)\r\n                }\r\n            }\r\n        } else {\r\n            adMap.get(type).forEach((ad) => {\r\n                ad.destroy()\r\n            })\r\n            adMap.get(type).splice(0)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取广告实例，不传adId（广告id），则返回第一个实例缓存\r\n     * @param type\r\n     * @param adId\r\n     * @returns\r\n     */\r\n    getAdInstance(type: AdTypeEnum, adId?: string) {\r\n        if (adId) {\r\n            return adMap.get(type).find(({ id }) => id === adId)\r\n        }\r\n        return adMap.get(type)[0]\r\n    }\r\n\r\n    /**\r\n     * @param type AdTypeEnum\r\n     * @param cb 回调\r\n     */\r\n    onAdClose(type: AdTypeEnum, cb: Function) {\r\n        // banner没有监听\r\n        if (type === AdTypeEnum.banner) {\r\n            return\r\n        }\r\n        const adArr = adMap.get(type)\r\n        if (adArr.length) {\r\n            adArr.forEach((ad) => {\r\n                ad.onClose(cb)\r\n            })\r\n            return\r\n        }\r\n        // 如果没有创建广告，先缓存回调方法\r\n        adCloseCallback.get(type).push(cb)\r\n    }\r\n}\r\n","import { getGlobalData } from '@/constants/globalData'\r\nimport { AnyObject, SdkType } from '@/types'\r\nimport { isSupportVersion } from './wxUtils'\r\nimport { wxLaunchInfoType } from './wxTypes'\r\nimport { WxAdManger } from './wxAdManger'\r\nimport { AdTypeEnum } from '@/types/enum'\r\n\r\nclass WXGAMESDK implements SdkType {\r\n    adManger = new WxAdManger()\r\n    init(opt?: AnyObject) {\r\n        const data = getGlobalData()\r\n        if (opt) {\r\n            data.initInfo = opt\r\n        }\r\n        // 初始化启动信息\r\n        // data.launchInfo = wx.getLaunchOptionsSync()\r\n        wx.onShow((e) => {\r\n            data.launchInfo = e\r\n        })\r\n\r\n        // 初始化设备信息：做兼容\r\n        const support = isSupportVersion('2.25.3')\r\n        if (support) {\r\n            const windowInfo = wx.getWindowInfo()\r\n            const sysInfo = wx.getDeviceInfo()\r\n            const appInfo = wx.getAppBaseInfo()\r\n            const settingInfo = wx.getSystemSetting()\r\n            data.systemInfo = Object.assign(\r\n                {},\r\n                windowInfo,\r\n                sysInfo,\r\n                appInfo,\r\n                settingInfo,\r\n                wx.getAppAuthorizeSetting()\r\n            )\r\n        } else {\r\n            data.systemInfo = wx.getSystemInfoSync()\r\n        }\r\n    }\r\n    login(opt: AnyObject) {}\r\n\r\n    showBannerAd(opt: WechatMinigame.CreateBannerAdOption) {\r\n        return this.adManger.showAd(AdTypeEnum.banner, opt)\r\n    }\r\n\r\n    showRewardedVideoAd(opt: WechatMinigame.CreateRewardedVideoAdOption) {\r\n        return this.adManger.showAd(AdTypeEnum.rewardVideo, opt)\r\n    }\r\n\r\n    showInterstitialAd(opt: WechatMinigame.CreateInterstitialAdOption) {\r\n        return this.adManger.showAd(AdTypeEnum.interstitial, opt)\r\n    }\r\n\r\n    onShow(cb?: (res: wxLaunchInfoType) => void) {\r\n        cb &&\r\n            wx.onShow((e) => {\r\n                cb(e as wxLaunchInfoType)\r\n            })\r\n    }\r\n    onHide(cb: () => void) {\r\n        cb && wx.onHide(cb)\r\n    }\r\n\r\n    getSystemInfo() {\r\n        return getGlobalData().systemInfo\r\n    }\r\n}\r\nconst wxGameSdk = window['wxGameSdk'] || new WXGAMESDK()\r\nwindow['wxGameSdk'] = wxGameSdk\r\n\r\nexport default wxGameSdk as WXGAMESDK\r\n","import wxGameSdk from '@/sdk/wx/index'\r\n\r\nconsole.log('🚀 ~ wxGameSdk:', wxGameSdk)\r\nwxGameSdk.init({})\r\nconst btnList = [\r\n    {\r\n        label: '登录',\r\n        onClick: () => {\r\n            wxGameSdk.login({})\r\n        },\r\n    },\r\n    {\r\n        label: 'banner广告',\r\n        onClick: () => {\r\n            const ad = wxGameSdk.showBannerAd({\r\n                adUnitId: 'adunit-3a241b4da2d0fb46',\r\n                style: { left: 0, top: 0, width: 100, height: 100 },\r\n            })\r\n            console.log('🚀 ~ ad:', ad)\r\n        },\r\n    },\r\n    {\r\n        label: '激励广告',\r\n        onClick: () => {\r\n            const ad = wxGameSdk.showRewardedVideoAd({\r\n                adUnitId: 'adunit-3a241b4da2d0fb46',\r\n            })\r\n            console.log('🚀 ~ ad:', ad)\r\n        },\r\n    },\r\n    {\r\n        label: '插屏广告',\r\n        onClick: () => {\r\n            const ad = wxGameSdk.showInterstitialAd({\r\n                adUnitId: 'adunit-3a241b4da2d0fb46',\r\n            })\r\n            console.log('🚀 ~ ad:', ad)\r\n        },\r\n    },\r\n]\r\nfunction initBtnList() {\r\n    const width = 100\r\n    const height = 50\r\n    const padding = 20\r\n    const { windowHeight, windowWidth } = wxGameSdk.getSystemInfo()\r\n    const max = Math.floor(windowWidth / width)\r\n    const space = (windowWidth - padding - max * width) / max\r\n    let top = 100\r\n    let col = 0\r\n\r\n    btnList.forEach(({ label, onClick }, index) => {\r\n        const _index = index % max\r\n        let left = (width + space) * _index + padding\r\n        if (index && _index === 0) {\r\n            left = padding\r\n            col += 1\r\n            top += height + space\r\n        }\r\n\r\n        const button = wx.createUserInfoButton({\r\n            type: 'text', // 文本按钮\r\n            text: label, // 按钮文字\r\n            style: {\r\n                left,\r\n                top,\r\n                width, // 按钮宽度\r\n                height, // 按钮高度\r\n                backgroundColor: '#ff5722', // 按钮背景色\r\n                color: '#ffffff', // 按钮文字颜色\r\n                fontSize: 16, // 按钮文字大小\r\n                borderRadius: 8, // 按钮圆角\r\n                textAlign: 'center', // 按钮文字对齐方式\r\n                lineHeight: 50, // 按钮文字行高\r\n            },\r\n        })\r\n        button.onTap(onClick)\r\n    })\r\n}\r\ninitBtnList()\r\n"],"names":["getFormatDate","timestamp","format","date","years","month","day","formatNum","num","dateStr","hour","min","second","isInvalidVal","val","sdkLog","args","sdkWarnLog","data","dataProxy","target","key","getGlobalData","wxCompareVersion","v1","v2","len","i","num1","num2","isSupportVersion","version","currentVersion","AdTypeEnum","adMap","adCloseCallback","WxAdManger","__publicField","type","addOnCloseFn","cb","ad","adId","index","item","id","adArr","WXGAMESDK","opt","e","windowInfo","sysInfo","appInfo","settingInfo","wxGameSdk","btnList","initBtnList","windowHeight","windowWidth","max","space","top","label","onClick","_index","left"],"mappings":"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"}